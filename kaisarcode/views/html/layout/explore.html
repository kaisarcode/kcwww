{{@setblock explore}}
{{@var title $title??'Explorar'}}
{{@var items $items??[]}}
{{@var pagination $pagination??null}}
{{@var order $order??null}}
{{@var mode $mode??null}}
{{@var pagingInfo $pagination}}
{{@var currentPage (int)($pagingInfo->page ?? 1)}}
{{@var totalPages (int)($pagingInfo->total_pages ?? 1)}}

<section id="explore">
    <header>
        <h2>
            {{@block ico ['name' => 'layer-group']}}
            <span>{{title}}</span>
        </h2>
        <nav>
            <menu>
                {{@if (!empty($mode->url ?? '')):}}
                <li>
                    <a href="{{mode.url}}" title="Cambiar modo">
                        {{@block ico ['name' => ($mode->current === 'blog' ? 'folder' : 'list')]}}
                        <span>{{mode->current === 'blog' ? 'Docs' : 'Blog'}}</span>
                    </a>
                </li>
                {{@endif}}

                {{@if (!empty($order->url ?? '')):}}
                <li>
                    <a href="{{order.url}}" title="Cambiar orden">
                        {{@block ico ['name' => ($order->current === 'asc' ? 'chevron-up' : 'chevron-down')]}}
                        <span>{{order->current === 'asc' ? 'ASC' : 'DESC'}}</span>
                    </a>
                </li>
                {{@endif}}

                {{@if (!empty($pagination->prev_url ?? '')):}}
                <li>
                    <a href="{{pagination.prev_url}}" title="Anterior">
                        {{@block ico ['name' => 'chevron-left']}}
                        <span>Anterior</span>
                    </a>
                </li>
                {{@endif}}

                {{@if (!empty($pagination->next_url ?? '')):}}
                <li>
                    <a href="{{pagination.next_url}}" title="Siguiente">
                        {{@block ico ['name' => 'chevron-right']}}
                        <span>Siguiente</span>
                    </a>
                </li>
                {{@endif}}
            </menu>
        </nav>
    </header>

    <section class="mode-{{mode.current}}">
        {{@if (empty($items)):}}
        <p>No hay documentos disponibles.</p>
        {{@endif}}

        {{@foreach ($items as $item):}}
        <article onclick="location.href='{{item.url}}'">
            {{@if (!empty($item->image)):}}
            <figure>
                <a href="{{item.url}}">
                    <img src="{{item.image}}" alt="{{item.title}}" loading="lazy">
                </a>
            </figure>
            {{@endif}}

            {{@if ($item->title && !str_starts_with($item->title, '/')):}}
            <header>
                <h3>
                    <a href="{{item.url}}">
                        {{@block ico ['name' => ($item->icon ?? 'file')]}}
                        <span>{{item.title}}</span>
                    </a>
                </h3>
                <nav>
                    <a href="{{item.url}}">
                        {{@block ico ['name' => 'eye']}}
                        <span>Ver</span>
                    </a>
                </nav>
            </header>
            {{@endif}}

            <section>
                <p><a href="{{item.url}}">{{item.desc}}</a></p>
            </section>
        </article>
        {{@endforeach}}
    </section>

    <footer>
        <p>Página {{currentPage}} de {{totalPages}}</p>
        <nav>
            <menu>
                {{@if ($totalPages > 1):}}
                    {{@if ($currentPage > 1):}}
                    <li><a href="{{pagination.first_url}}">Primera</a></li>
                    {{@endif}}
                    {{@if ($currentPage < $totalPages):}}
                    <li><a href="{{pagination.last_url}}">Última</a></li>
                    {{@endif}}
                {{@endif}}
            </menu>
        </nav>
    </footer>
</section>
{{@endsetblock}}
